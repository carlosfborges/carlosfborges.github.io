<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Board</title>
    <script src="https://kit.fontawesome.com/563cb0198d.js" crossorigin="anonymous"></script>
    <style>
        * { margin:0;padding:0;box-sizing:border-box; }
        #moodboard { overflow:hidden;position:relative;width:0; }
        #moodboard header {
            position:absolute;top:0;right:0;margin:30px;width:30px;height:30px;
            color:rgba(0,0,0,.1);cursor:pointer;
        }
        #moodboard header:hover { color:rgba(0,0,0,.3); }
        #moodboard main { width:95vw;height:100vh;margin:auto; }
        #moodboard nav { 
            position:absolute;bottom:0;width:100%;background-color:#803c3c;padding:16px;text-align:center; 
            box-shadow:0 0 8px;transform:translateY(calc(100% - 60px));transition:all .5s;color:white;
        }
        #moodboard nav p { margin-bottom: 16px; }
        #moodboard nav:hover { transform:translateY(0); }
        #moodboard button { 
            padding: 32px 16px;text-transform:uppercase;color:white;
            background-color:transparent;border:none;cursor:pointer; 
        }
        #moodboard nav button { width:calc(98%/3);font-size:large; }
        #moodboard nav button:hover { background-color: rgba(0,0,0,.2); }
        #openMoodboard { 
            position:fixed;left:0;bottom:30vh;text-transform:uppercase !important;
            background-color:#803c3c !important;color:white;padding:16px 8px;text-align:center;
            cursor:pointer;
        }
        #mTabs { position:absolute;width:100%;bottom:65px;text-align:center;white-space:nowrap; }
        #mTabs button { 
            color:rgba(0,0,0,.3);width:45%;background-color:rgba(255,255,255,.15); 
            font-size:large;
        }
        #mTabs button:hover { color:#803c3c;text-decoration:underline double .1px;text-shadow:0 0 .5px; }
        #mBoard, #mItems { width:100%;height:100%; }
        #mBoard { background:white url("bg/bg1.png") no-repeat center;background-size: contain; }
        [data-outline="open"] { 
            animation-name:openOutline;animation-duration:1s;
            animation-timing-function:ease-in-out;animation-fill-mode:forwards; 
         }
        [data-outline="close"] { 
            animation-name:closeOutline;animation-duration:1s;
            animation-timing-function:ease-in-out;animation-fill-mode:forwards; 
        }
        [data-outline="open"] #openMoodboard { 
            animation-name:openPos;animation-duration:1s;
            animation-timing-function:ease-in-out;animation-fill-mode:forwards; 
         }
        [data-outline="close"] #openMoodboard { 
            animation-name:closePos;animation-duration:1s;
            animation-timing-function:ease-in-out;animation-fill-mode:forwards; 
        }
        [data-nav="open"] { transform:translateY(0) !important; }
        [data-nav="close"] { transform:translateY(calc(100% - 60px)) !important; }
        .hide { display:none; }
        .tabSel { color:#803c3c !important;text-decoration:underline double .1px;text-shadow:0 0 .5px; }
        @keyframes openOutline { from {width:0;} to {width:100%;} }
        @keyframes closeOutline { from { width:100%; } to { width:0; } }
        @keyframes openPos { from {left:0;} to {left:100%;} }
        @keyframes closePos { from { left:100%; } to { left:0; } }
        @media screen and (max-width:600px) {
            #moodboard nav button { display: block;width:100%; }
        }
    </style>
</head>
<body>
    <section id="moodboard" data-outline="">
        <header><i class="fas fa-window-close fa-3x"></i></header>
        <main>
            <div id="mBoard"></div>
            <div id="mItems" class="hide">
                <p style="text-align:center;line-height:100vh;">LISTA DOS ITENS INSERIDOS NO MOODBOARD</p>
            </div>
            <div id="mTabs">
                <button data-tab="mBoard" class="tabSel">Prancha</button>
                <button data-tab="mItems">Itens</button>
            </div>
        </main>
        <p id="openMoodboard" style="writing-mode: vertical-rl; text-orientation: upright;">Moodboard</p>
        <nav>
            <p><i class="fas fa-bars fa-2x"></i></p>
            <button onclick="alert('Abrir página de Background')">Background</button>
            <button onclick="alert('Abrir página dos Produtos')">Produtos</button>
            <button onclick="alert('Abrir página dos Elementos - Matéria Prima - Acabamentos')">Elementos</button>
        </nav>
    </section>
    <script>
        const 
        moodboard = document.getElementById("moodboard"), 
        touch = { 
            start:0,
            end:0,
            get res() { return this.start - this.end; }, 
            init: function() { this.start = 0; this.end = 0; }
        };
        let navStatus = "close";

        moodboard.querySelector("header").addEventListener("click", function() {
            moodboard.setAttribute("data-outline","close");
        });
        document.getElementById("openMoodboard").addEventListener("click", function() {
            moodboard.setAttribute("data-outline","open");
        });

        document.body.clientWidth <= 600 &&
        moodboard.querySelector("nav p").addEventListener("click", function() {
            this.parentElement.setAttribute("data-nav", 
            this.parentElement.dataset.nav === "open" ? "close" : "open");
        });

        for (const item of document.getElementById("mTabs").children) {
            item.addEventListener("click", function() { 
                document.getElementById("mBoard").classList.add("hide");
                document.getElementById("mItems").classList.add("hide");
                document.getElementById(this.dataset.tab).classList.remove("hide");
                document.querySelector("[data-tab='mBoard']").classList.remove("tabSel");
                document.querySelector("[data-tab='mItems']").classList.remove("tabSel");
                this.classList.add("tabSel");
            });
        }

        moodboard.addEventListener("touchstart", () => {
            touch.start = event.touches[event.touches.length - 1].pageX;
            touch.end = window.screen.availWidth;
        });
        moodboard.addEventListener("touchmove", () => {
            touch.end = event.touches[event.touches.length - 1].pageX;
            if (Math.sign(touch.res) === -1) { return false; }
            moodboard.style.right = touch.res + "px";
        });
        moodboard.addEventListener("touchend", () => {
            if (Math.sign(touch.res) === -1) { moodboard.style.right = 0; return false; }
            if (touch.res >= 30) { 
                moodboard.setAttribute("data-outline","close");
                setTimeout(() => moodboard.style.right = 0, 1000);
            } else {
                moodboard.style.right = 0;
            }
            touch.init();
        });
    </script>
</body>
</html>