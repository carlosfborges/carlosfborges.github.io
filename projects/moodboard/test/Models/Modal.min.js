"use strict";class Modal{constructor(t,e=!0){try{if(void 0===t)throw"The id is undefined.";if("string"!=typeof t)throw"The id must be type of string";this.arrStatus=["open","close"],this.arrType=["html","src"],this.createEl(),this.el.id=t,!0===e&&this.createStyle(),this.children={header:this.el.querySelector("[data-modal-header]"),close:this.el.querySelector("[data-modal-close]"),content:this.el.querySelector("[data-modal-content]"),mask:this.el.querySelector("[data-modal-mask]"),loading:this.el.querySelector("[data-modal-loading]")},this.msgs={open:"Loading ...",abort:"Feiled."},this.addEvents()}catch(t){console.log(t)}}createEl(){this.el=document.createElement("div"),this.el.innerHTML="<div data-modal-header><div data-modal-close>Close</div></div><div data-modal-content></div><div data-modal-mask><div data-modal-loading></div></div>",document.querySelector("body").append(this.el)}createStyle(){this.setStatus("close");const t=document.createElement("style");t.innerHTML=`
			#`+this.el.id+`	{	box-sizing: border-box; background-color: whitesmoke;	padding: 10px; position: fixed;	top: 0;	left: 0; overflow: hidden; width: 100%;	height: 100%; }
			#`+this.el.id+`[data-modal-status='close'] { display: none; }
			#`+this.el.id+`[data-modal-status='open'] { display: block; }
			#`+this.el.id+`[data-modal-type='html'] > div[data-modal-mask] { display: none; }
			#`+this.el.id+` > div[data-modal-header] { display: flex; justify-content: flex-end; }
			#`+this.el.id+` > div[data-modal-header] > div[data-modal-close] { cursor: pointer; padding: 0 5px; border-left: 1px solid gray; }
			#`+this.el.id+` > div[data-modal-content] { background-color: white; margin-top: 10px; height: 100%; overflow-y: auto; }
			#`+this.el.id+` > div[data-modal-content] > iframe { width: 100%; height: 95%; border: none; }
			#`+this.el.id+` > div[data-modal-mask] { background-color: rgba(0, 0, 0, 0.7); position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
			#`+this.el.id+` > div[data-modal-mask] > div[data-modal-loading] { color: white; }
		`,document.querySelector("head").append(t)}addEvents(){this.children.close.addEventListener("click",()=>this.setStatus("close"))}setStatus(t){if(!this.arrStatus.includes(t))return console.log("Status not valid."),!1;this.el.dataset.modalStatus=t}setType(t){if(!this.arrType.includes(t))return console.log("Type not valid."),!1;this.el.dataset.modalType=t}setContent(t,e){if(this.clearContent(),this.children.loading.innerHTML=this.msgs.open,"html"===e)return this.children.content.innerHTML=t,!1;this.setType("src");const i=document.createElement("iframe"),a=(i.src=t,this.children.content.append(i),i.contentWindow.document||i.contentDocument);let d=0,o=setInterval(()=>{"complete"===a.readyState&&void 0===clearInterval(o)&&this.setType("html"),5e3<=d&&void 0===clearInterval(o)&&this.abortContent(),d+=1e3},1e3)}display(t,e="html"){if(!1===this.setType(e))return!1;this.setContent(t,e),this.setStatus("open")}abortContent(){this.clearContent();let t=4e3,e=setInterval(()=>{t<=0&&void 0===clearInterval(e)&&this.setStatus("close"),this.children.loading.innerHTML=this.msgs.abort+" Closing in "+(t-1e3)/1e3,t-=1e3},1e3)}clearContent(t="content"){switch(t){case"all":this.children.content.innerHTML="",this.children.loading.innerHTML="";break;case"loading":this.children.loading.innerHTML="";break;default:this.children.content.innerHTML=""}}}export{Modal};